{% extends 'base.html' %}
{%block content%}
<style>
  .panel-tabs-scrollable {
    overflow-x: auto;
    white-space: nowrap;
    text-align: center;
  }
  
  .panel-tabs {
    display: inline-block;
    white-space: nowrap;
  }
</style>
<!-- Modal tag-->
<div id="modal-tag">
</div>
<section class="hero is-small is-link">
    <div class="hero-body">
      <div class="columns is-mobile">
        <div class="column">
          <p class="title is-size-2">
            {{espaco.title}}
          </p>
            <p class="subtitle is-size-7">
              {{espaco.description}}
            </p>
        </div>
        <div class="column is-narrow">
          <div x-data="{ isdropdownOpen: false }" x-bind:class="isdropdownOpen ? 'is-active' : ''" class="dropdown is-right" x-cloak>
            <div class="dropdown-trigger">
              <button @click.stop.prevent="isdropdownOpen = !isdropdownOpen" @click.stop.outside="isdropdownOpen = false" class="button is-medium is-primary" aria-haspopup="true" aria-controls="dropdown-menu">
                <span>Adicionar nova questão</span>
                <span class="icon is-small">
                  <i class="fas fa-angle-down" aria-hidden="true"></i>
                </span>
              </button>
            </div>
            <div class="dropdown-menu"  id="dropdown-menu" role="menu">
              <div class="dropdown-content">
                <a href="" class=" dropdown-item">
                  múltipla escolha
                </a>
                <a href="" class="dropdown-item">
                  discursiva
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
        
      <p class="control has-icons-left">
        <input class="input is-medium is-focused is-danger" type="text" placeholder="Pesquisa de palavras-chave em questões, comentários ou resoluções">
        <span class="icon is-left">
          <i class="fas fa-search" aria-hidden="true"></i>
        </span>
      </p>
        
    </div>
</section>
<div>
  
  <nav class="panel" >
    <div class="panel-heading">
      <div class="columns is-mobile">
        <div class="column">
          Painel de Tags
        </div>
        <div class="column is-narrow">
          <div class="buttons is-right">
            <button class="button is-info"            
             hx-get="{% url 'tag_creation' espaco=espaco.id %}"             
             hx-target="#modal-tag"
             hx-trigger="click"
             x-cloak
             @click.stop="modaltagopen = !modaltagopen">
             Criar nova tag</button>
          </div>
        </div>
      </div>
    </div> 

    <div class="panel-block has-background-success has-text-white p-2 has-border-success"
      x-cloak
      x-show="successmessage"
      @taglistchanged.window = "successmessage = !successmessage"
      @taglistchanged.window.debounce.3000ms="successmessage = !successmessage"
      >
      <span class="icon">
        <i class="fa-solid fa-circle-check"></i>
      </span>
      <p>Tag adicionada com sucesso!</p>
    </div>
         
    <div class="panel-block">
      <p class="control has-icons-left">
        <input class="input" 
        type="text" 
        placeholder="Pesquisar entre todas as tags"
        hx-post="{% url 'search_tag' %}"
        hx-target='#tag_selection'
        hx-vals='{"espaco": "{{espaco.id}}"}'
        hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
        hx-trigger="keyup changed delay:500ms"
        name="search"
        >
        <span class="icon is-left">
          <i class="fas fa-search" aria-hidden="true"></i>
        </span>
      </p>
      
    </div>

    <div hx-get="{% url 'lista_categorias' %}"
    hx-vals='{"espaco": "{{espaco.id}}"}'
    hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
    hx-trigger="load, taglistchanged from:window"
    hx-swap="innerHTML" 
    hx-target="#categoria_lista" 
    >      
    </div> 
    <div id="categoria_lista">
    </div>    
    
    </div>
    <div id="tag_selection">
    </div>

  </nav>
</div>

<div class="box" id="tags_selected">
  {% include 'espaco/tags_selecionadas.html' %}    
</div>





  
  
{%endblock content%}